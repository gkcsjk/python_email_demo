{% extends "layout.html" %}
{% block css %}
    <style>
        .loader {
              border: 16px solid #f3f3f3; /* Light grey */
              border-top: 16px solid #3498db; /* Blue */
              border-radius: 50%;
              width: 120px;
              height: 120px;
              animation: spin 2s linear infinite;
            }

            @keyframes spin {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
    </style>
{% endblock %}
{% block content %}
    <br>

    <h1 style="padding-top: 50px">Clients</h1>
    <a class="btn btn-primary my-2" href="{% url 'email' %}" onclick="send_email()">Send Email</a>

    <p><small>This will send email to all your clients who has an email address and Outstanding is 'OS'</small></p>
    <br>

    <div id="loader" class="loader" style="display: none"></div>

    <table class="table" id="client-table">
        <thead>
            <tr>
                <th scope="col">Name</th>
                <th scope="col">Email</th>
                <th scope="col">Outstanding?</th>
            </tr>
        </thead>
        <tbody>
            {% if clients %}
                {% for client in clients %}
                <tr>
                    <td>{{ client.name }}</td>
                    <td>{{ client.email }}</td>
                    <td>{{ client.if_os }}</td>
                </tr>
                {% endfor %}
            {% endif %}
        </tbody>
    </table>

    <script>
        function send_email() {
            document.getElementById('client-table').style.display = 'none';
            document.getElementById('loader').style.display = 'block';

        }

    </script>
{% endblock %}

